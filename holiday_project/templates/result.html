{% load static from static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="author" content="Philip Steinwald">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Result Page</title>
    <link rel="shortcut icon" href="{% static 'icon.png'%}" type="image/x-icon" />
    <link rel="stylesheet" href="{% static 'styleResult.css'%}">
</head>

<body>

    <div class="page-container">
        <div class="sidebar">
            <div class="sidebar-container">
                <form class="grid-container2" action="/response" method="get">
                    <label class="popupAirport" id="popupAirport" onclick="popupAirportFunc()">"Abflughafen"
                    </label>
                    <label class="popupPerson" id="popupPerson" onclick="popupPersonFunc()">1 Erw. 0 Kin.
                    </label>
                    <div class="days">
                        <label>Dauer: &nbsp;</label>
                        <input type="number" class="daysInput" id="quantity" name="quantity" min="1" required>
                        <label>Tage</label>
                    </div>
                    <div class="date1">
                        <input type="date" class="dateInput" id="firstDate" name="firstDate" placeholder="Hinflug" required>
                        <label>&nbsp; bis &nbsp;</label>
                    </div>
                    <input type="date" class="date2" id="secondDate" name="secondDate" placeholder="Rückflug" required>
                    <div class="next">
                        <input type="text" class="hidden-inputs" id="airports" name="airports" value="" required>
                        <input type="text" class="hidden-inputs" id="persons" name="persons" value="1 Erw. 0 Kin." required>
                        <input type="submit" class="submitInput" value="Reise finden">
                    </div>
                </form> 
            </div>
        </div>
        <div class="main">
            <h1>Ihre Angebote für das {{ hotelname }}</h1>
            <h2>Zeitraum: {{ startdate }} - {{ enddate }}</h2><br>
            {% for offer in offer_list %}
            <div class="offer-container"> 
                <div class="grid-containerFlights">
                    <div class="depature1">
                        <label style="align-self: center">{{ offer.0 }}<br>{{ offer.1 }} Uhr</label>
                    </div>
                    <div class="arrival1">
                        <label style="align-self: center">{{ offer.4 }}<br>{{ offer.5 }} Uhr</label>
                    </div>
                    <div class="airport">
                        <div style="top: 10px; position: relative">
                            <label class="ITAcode">{{ offer.12 }}</label><br>
                            {% if offer.12 == 'FRA' %}
                                <label class="airportName">Frankfurt am Main</label>
                            {% elif offer.12 == 'MUC' %}
                                <label class="airportName">München</label>
                            {% elif offer.12 == 'BER' %}
                                <label class="airportName">Berlin</label>
                            {% elif offer.12 == 'LEJ' %}
                                <label class="airportName">Leipzig/Halle</label>
                            {% elif offer.12 == 'DUS' %}
                                <label class="airportName">Düsseldorf</label>
                            {% elif offer.12 == 'HAM' %}
                                <label class="airportName">Hamburg</label>
                            {% elif offer.12 == 'VIE' %}
                                <label class="airportName">Wien</label>
                            {% elif offer.12 == 'NUE' %}
                                <label class="airportName">Nürnberg</label>
                            {% elif offer.12 == 'SCN' %}
                                <label class="airportName">Saarbrücken</label>
                            {% elif offer.12 == 'STR' %}
                                <label class="airportName">Stuttgart</label>
                            {% elif offer.12 == 'HAJ' %}
                                <label class="airportName">Hannover-Langenhagen</label>
                            {% elif offer.12 == 'BSL' %}
                                <label class="airportName">Basel-Mülhausen</label>
                            {% elif offer.12 == 'FDH' %}
                                <label class="airportName">Friedrichshafen</label>
                            {% elif offer.12 == 'FMO' %}
                                <label class="airportName">Münster/Osnabrück</label>
                            {% elif offer.12 == 'CGN' %}
                                <label class="airportName">Köln/Bonn</label>
                            {% elif offer.12 == 'PAD' %}
                                <label class="airportName">Paderborn</label>
                            {% elif offer.12 == 'FMM' %}
                                <label class="airportName">Memmingen</label>
                            {% elif offer.12 == 'DRS' %}
                                <label class="airportName">Dresden</label>
                            {% elif offer.12 == 'BRE' %}
                                <label class="airportName">Bremen</label>
                            {% elif offer.12 == 'DTM' %}
                                <label class="airportName">Dortmund</label>
                            {% elif offer.12 == 'NRN' %}
                                <label class="airportName">Niederrhein</label>
                            {% elif offer.12 == 'HHN' %}
                                <label class="airportName">Frankfurt-Hain</label>
                            {% elif offer.12 == 'FKB' %}
                                <label class="airportName">Karlsruhe/Baden-Baden</label>
                            {% elif offer.12 == 'ZRH' %}
                                <label class="airportName">Zürich</label>
                            {% elif offer.12 == 'SZG' %}
                                <label class="airportName">Salzburg</label>
                            {% elif offer.12 == 'LUX' %}
                                <label class="airportName">Luxemburg</label>
                            {% elif offer.12 == 'AMS' %}
                                <label class="airportName">Amsterdam Schiphol</label>
                            {% elif offer.12 == 'PRG' %}
                                <label class="airportName">Prag</label>
                            {% elif offer.12 == 'INN' %}
                                <label class="airportName">Innsbruck</label>
                            {% elif offer.12 == 'KSF' %}
                                <label class="airportName">Kassel</label>
                            {% elif offer.12 == 'LNZ' %}
                                <label class="airportName">Linz</label>
                            {% elif offer.12 == 'EIN' %}
                                <label class="airportName">Eindhoven</label>
                            {% elif offer.12 == 'SXB' %}
                                <label class="airportName">Straßburg</label>
                            {% elif offer.12 == 'BLL' %}
                                <label class="airportName">Billund</label>
                            {% elif offer.12 == 'LBC' %}
                                <label class="airportName">Lübeck</label>
                            {% elif offer.12 == 'BRU' %}
                                <label class="airportName">Brüssel-Zaventem</label>
                            {% elif offer.12 == 'GRZ' %}
                                <label class="airportName">Graz</label>
                            {% elif offer.12 == 'GWT' %}
                                <label class="airportName">Sylt</label>
                            {% elif offer.12 == 'CRL' %}
                                <label class="airportName">Brüssel-Süd</label>
                            {% elif offer.12 == 'CSO' %}
                                <label class="airportName">Madgeburg</label>
                            {% elif offer.12 == 'WAW' %}
                                <label class="airportName">Warschau</label>
                            {% elif offer.12 == 'GVA' %}
                                <label class="airportName">Genf</label>
                            {% elif offer.12 == 'ERF' %}
                                <label class="airportName">Erfurt-Weimar</label>
                            {% elif offer.12 == 'KRK' %}
                                <label class="airportName">Krakau</label>
                            {% elif offer.12 == 'BRN' %}
                                <label class="airportName">Bern</label>
                            {% elif offer.12 == 'RLG' %}
                                <label class="airportName">Rostock</label>
                            {% elif offer.12 == 'KLU' %}
                                <label class="airportName">Klagenfurt</label>
                            {% elif offer.12 == 'RTM' %}
                                <label class="airportName">Rotterdam/Den Haag</label>
                            {% else %}
                                <label class="airportName">Unknown Airport</label>
                            {% endif %}
                        </div>
                    </div>
                    <img class="arrow1" src="{% static 'airplaneDown.jpg'%}" alt="Airplane Image Placeholder">
                    <img class="arrow2" src="{% static 'airplaneUp.jpg'%}" alt="Airplane Image Placeholder2">
                    <div class="arrival2">
                        <label style="align-self: center">{{ offer.2 }}<br>{{ offer.3 }} Uhr</label>
                    </div>
                    <div class="depature2">
                        <label style="align-self: center">{{ offer.6 }}<br>{{ offer.7 }} Uhr</label>
                    </div>
                    <div class="palma">
                        <div style="top: 30px; position: relative">
                            <label class="ITAcode">PMI</label><br>
                            <label class="airportName">Palma de Mallorca</label>
                        </div>
                    </div>
                </div>
                <div class="grid-containerOffer">
                    <div class="left">
                        {% if offer.8 == 0 %}
                            <div class="room"> Siehe Beschreibung </div>
                        {% elif offer.8 == 1 %}
                            <div class="room"> 1x Einzelzimmer </div>
                        {% elif offer.8 == 2 %}
                            <div class="room"> 1x Doppelzimmer </div>
                        {% elif offer.8 == 3 %}
                            <div class="room"> 1x Dreierzimmer </div>
                        {% elif offer.8 == 4 %}
                            <div class="room"> 1x Viererzimmer </div>
                        {% elif offer.8 == 5 %}
                            <div class="room"> 1x Juniorsuite </div>
                        {% elif offer.8 == 6 %}
                            <div class="room"> 1x Suite </div>
                        {% elif offer.8 == 7 %}
                            <div class="room"> 1x Apartment </div>
                        {% elif offer.8 == 8 %}
                            <div class="room"> 1x Studio </div>
                        {% elif offer.8 == 9 %}
                            <div class="room"> 1x Superior-Zimmer </div>
                        {% elif offer.8 == 10 %}
                            <div class="room"> 1x Economy-Zimmer </div>
                        {% elif offer.8 == 11 %}
                            <div class="room"> 1x Familienzimmer </div>
                        {% elif offer.8 == 12 %}
                            <div class="room"> 1x Bungalow </div>
                        {% elif offer.8 == 13 %}
                            <div class="room"> 1x Deluxe-Zimmer </div>
                        {% elif offer.8 == 14 %}
                            <div class="room"> 1x Mehrbettzimmer </div>
                        {% elif offer.8 == 15 %}
                            <div class="room"> 1x Twin-Zimmer </div>
                        {% elif offer.8 == 16 %}
                            <div class="room"> 1x Villa </div>
                        {% elif offer.8 == 17 %}
                            <div class="room"> 1x Ferienhaus </div>
                        {% elif offer.8 == 18 %}
                            <div class="room"> 1x Duplex-Zimmer </div>
                        {% else %}
                            <div class="room"> 1x{{ offer.8 }} </div>
                        {% endif %}
                        {% if offer.9 == 0 %}
                            <div class="mealtype"> Keine Verpflegung </div>
                        {% elif offer.9 == 1 %}
                            <div class="mealtype"> Frühstück </div>
                        {% elif offer.9 == 2 %}
                            <div class="mealtype"> Halbpension </div>
                        {% elif offer.9 == 3 %}
                            <div class="mealtype"> Halbpension+ </div>
                        {% elif offer.9 == 4 %}
                            <div class="mealtype"> Vollpension </div>
                        {% elif offer.9 == 5 %}
                            <div class="mealtype"> Vollpension+ </div>
                        {% elif offer.9 == 6 %}
                            <div class="mealtype"> Alles Inklusive </div>
                        {% elif offer.9 == 7 %}
                            <div class="mealtype"> Alles Inklusive+ </div>
                        {% elif offer.9 == 8 %}
                            <div class="mealtype"> Siehe Beschreibung </div>
                        {% else %}
                            <div class="mealtype"> {{ offer.9 }} </div>
                        {% endif %}
                    </div>
                    <form class="right" action="/final" method="get">
                        <div class="price">Preis: {{ offer.11 }}€</div>
                        <input type="submit" class="hotel-button" value="Angebot buchen">
                    </form>
                </div>
            </div><br>
            {% endfor %}
        </div>
    </div>

    <div class="popupPerson-container" id="myPersonPopup">
        <input type="button" class="parent-minus" onclick="decrementParentValue()" value="-" />
        <input type="text" id="parent-number" class="parent-number" value="1" readonly/>
        <input type="button" class="parent-plus" onclick="incrementParentValue()" value="+" />
        <label class="parents">Erwachsene</label>
        <input type="button" class="children-minus" onclick="decrementChildrenValue()" value="-" />
        <input type="text" id="children-number" class="children-number" value="0" readonly/>
        <input type="button" class="children-plus" onclick="incrementChildrenValue()" value="+" />
        <label class="children">Kinder</label>
        <input type="button" class="popup-button" onclick="safePopup()" value="Übernehmen"/>
    </div>

    <div class="popupAirport-button" id="myAirportPopupBottom" style="visibility: hidden;">
        <input type="button" style="width: 255px; height: 30px;" onclick="popupAirportFunc()" value="Übernehmen"/>
    </div>

    <div class="popupAirport-container" id="myAirportPopupTop" style="visibility: hidden;">
        <input type="checkbox" onclick="tickBox('FRA')"/>
        <label>Frankfurt(FRA)</label><br>
        <input type="checkbox" onclick="tickBox('MUC')"/>
        <label>München(MUC)</label><br>
        <input type="checkbox" onclick="tickBox('BER')"/>
        <label>Berlin(BER)</label><br>
        <input type="checkbox" onclick="tickBox('LEJ')"/>
        <label>Leipzig(LEJ)</label><br>
        <input type="checkbox" onclick="tickBox('DUS')"/>
        <label>Düsseldorf(DUS)</label><br>
        <input type="checkbox" onclick="tickBox('HAM')"/>
        <label>Hamburg(HAM)</label><br>
        <input type="checkbox" onclick="tickBox('VIE')"/>
        <label>Wien(VIE)</label><br>
        <input type="checkbox" onclick="tickBox('NUE')"/>
        <label>Nürnberg(NUE)</label><br>
        <input type="checkbox" onclick="tickBox('SCN')"/>
        <label>Saarbrücken(SCN)</label><br>
        <input type="checkbox" onclick="tickBox('STR')"/>
        <label>Stuttgart(STR)</label><br>
        <input type="checkbox" onclick="tickBox('HAJ')"/>
        <label>Hannover(HAJ)</label><br>
        <input type="checkbox" onclick="tickBox('BSL')"/>
        <label>Basel(BSL)</label><br>
        <input type="checkbox" onclick="tickBox('FDH')"/>
        <label>Friedrichshafen(FDH)</label><br>
        <input type="checkbox" onclick="tickBox('FMO')"/>
        <label>Münster/Osnabrück(FMO)</label><br>
        <input type="checkbox" onclick="tickBox('CGN')"/>
        <label>Köln/Bonn(CGN)</label><br>
        <input type="checkbox" onclick="tickBox('PAD')"/>
        <label>Paderborn(PAD)</label><br>
        <input type="checkbox" onclick="tickBox('FMM')"/>
        <label>Memmingen(FMM)</label><br>
        <input type="checkbox" onclick="tickBox('DRS')"/>
        <label>Dresden(DRS)</label><br>
        <input type="checkbox" onclick="tickBox('BRE')"/>
        <label>Bremen(BRE)</label><br>
        <input type="checkbox" onclick="tickBox('DTM')"/>
        <label>Dortmund(DTM)</label><br>
        <input type="checkbox" onclick="tickBox('NRN')"/>
        <label>Niederrhein(NRN)</label><br>
        <input type="checkbox" onclick="tickBox('HHN')"/>
        <label>Frankfurt-Hain(HHN)</label><br>
        <input type="checkbox" onclick="tickBox('FKB')"/>
        <label>Karlsruhe/Baden-Baden(FKB)</label><br>
        <input type="checkbox" onclick="tickBox('ZRH')"/>
        <label>Zürich(ZRH)</label><br>
        <input type="checkbox" onclick="tickBox('SZG')"/>
        <label>Salzburg(SZG)</label><br>
        <input type="checkbox" onclick="tickBox('LUX')"/>
        <label>Luxemburg(LUX)</label><br>
        <input type="checkbox" onclick="tickBox('AMS')"/>
        <label>Amsterdam(AMS)</label><br>
        <input type="checkbox" onclick="tickBox('PRG')"/>
        <label>Prag(PRG)</label><br>
        <input type="checkbox" onclick="tickBox('INN')"/>
        <label>Innsbruck(INN)</label><br>
        <input type="checkbox" onclick="tickBox('KSF')"/>
        <label>Kassel(KSF)</label><br>
        <input type="checkbox" onclick="tickBox('LNZ')"/>
        <label>Linz(LNZ)</label><br>
        <input type="checkbox" onclick="tickBox('EIN')"/>
        <label>Eindhoven(EIN)</label><br>
        <input type="checkbox" onclick="tickBox('SXB')"/>
        <label>Straßburg(SXB)</label><br>
        <input type="checkbox" onclick="tickBox('BLL')"/>
        <label>Billund(BLL)</label><br>
        <input type="checkbox" onclick="tickBox('LBC')"/>
        <label>Lübeck(LBC)</label><br>
        <input type="checkbox" onclick="tickBox('BRU')"/>
        <label>Brüssel(BRU)</label><br>
        <input type="checkbox" onclick="tickBox('GRZ')"/>
        <label>Graz(GRZ)</label><br>
        <input type="checkbox" onclick="tickBox('GWT')"/>
        <label>Sylt(GWT)</label><br>
        <input type="checkbox" onclick="tickBox('CRL')"/>
        <label>Brüssel-Süd(CRL)</label><br>
        <input type="checkbox" onclick="tickBox('CSO')"/>
        <label>Madgeburg(CSO)</label><br>
        <input type="checkbox" onclick="tickBox('WAW')"/>
        <label>Warschau(WAW)</label><br>
        <input type="checkbox" onclick="tickBox('GVA')"/>
        <label>Genf(GVA)</label><br>
        <input type="checkbox" onclick="tickBox('ERF')"/>
        <label>Erfurt-Weimar(ERF)</label><br>
        <input type="checkbox" onclick="tickBox('KRK')"/>
        <label>Krakau(KRK)</label><br>
        <input type="checkbox" onclick="tickBox('BRN')"/>
        <label>Bern(BRN)</label><br>
        <input type="checkbox" onclick="tickBox('RLG')"/>
        <label>Rostock(RLG)</label><br>
        <input type="checkbox" onclick="tickBox('KLU')"/>
        <label>Klagenfurt(KLU)</label><br>
        <input type="checkbox" onclick="tickBox('RTM')"/>
        <label>Rotterdam/Den Haag(RTM)</label><br>
    </div>

    <script>
    //functions to make the popups visible and to position them
    function popupPersonFunc() {
        var popup = document.getElementById("myPersonPopup");
        var popupOrigin = document.getElementById("popupPerson");
        var rect = popupOrigin.getBoundingClientRect();
        popup.style.top = (rect.top + 38)  + 'px';
        if(rect.left - 50 < 5){
            popup.style.left = '5px';
        }else {
            popup.style.left = (rect.left - 50) + 'px';
        }
        popup.classList.toggle("show");
    }

    function popupAirportFunc() {
        var popup1 = document.getElementById("myAirportPopupTop");
        var popup2 = document.getElementById("myAirportPopupBottom");
        var popupOrigin = document.getElementById("popupAirport");
        var rect = popupOrigin.getBoundingClientRect();
        popup1.style.top = (rect.top + 38) + 'px';
        popup2.style.top = (rect.top + 138) + 'px';
        if(rect.left - 40 < 5){
            popup1.style.left = '5px';
            popup2.style.left = '5px';
        }else {
            popup1.style.left = (rect.left - 40) + 'px';
            popup2.style.left = (rect.left - 40) + 'px';
        }
        if(popup1.style.visibility == 'hidden') {
            popup1.style.visibility = 'visible';
            popup2.style.visibility = 'visible';
        }else {
            popup1.style.visibility = 'hidden';
            popup2.style.visibility = 'hidden';
        }
    }


    //functions to increment/decrement the value for the number of children/parents
    function decrementParentValue() {
        var valueC = parseInt(document.getElementById('children-number').value, 10);
        var valueP = parseInt(document.getElementById('parent-number').value, 10);
        //check to ensure that at least one person is selected
        value = (isNaN(valueC) ? 0 : valueC) + (isNaN(valueP) ? 0 : valueP);
        if(value > 1 && valueP > 0){
            valueP--;
        }
        document.getElementById('parent-number').value = valueP;
    }

    function incrementParentValue() {
        var value = parseInt(document.getElementById('parent-number').value, 10);
        value = isNaN(value) ? 0 : value;
        value++;
        document.getElementById('parent-number').value = value;
    }

    function decrementChildrenValue() {
        var valueC = parseInt(document.getElementById('children-number').value, 10);
        var valueP = parseInt(document.getElementById('parent-number').value, 10);
        //check to ensure that at least one person is selected
        value = (isNaN(valueC) ? 0 : valueC) + (isNaN(valueP) ? 0 : valueP);
        if(value > 1 && valueC > 0){
            valueC--;
        }
        document.getElementById('children-number').value = valueC;
    }

    function incrementChildrenValue() {
        var value = parseInt(document.getElementById('children-number').value, 10);
        value = isNaN(value) ? 0 : value;
        value++;
        document.getElementById('children-number').value = value;
    }


    //function to safe the values in the following format: xErw.xKin.
    function safePopup() {
        var value1 = parseInt(document.getElementById('parent-number').value, 10);
        var value2 = parseInt(document.getElementById('children-number').value, 10);
        document.getElementById('popupPerson').innerHTML = value1 + ' Erw. ' + value2 + ' Kin.';
        document.getElementById('persons').value = value1 + ' Erw. ' + value2 + ' Kin.';
        popupPersonFunc();
    }


    //function to update the selected airports
    function tickBox(ita) {
        var popup = document.getElementById("popupAirport");
        //check whether no airport is selected at the moment
        if(popup.innerHTML.includes("Abflughafen")) {
            popup.innerHTML = ita;
            document.getElementById('airports').value = ita;
        }else {
            //check whether the airport is already selected or not
            if(popup.innerHTML.includes(ita)){
                //updates the displayed list of selected airports to remove the airport
                var ita_list = popup.innerHTML.split(', ');
                var result = '';
                for(var i=0;i<ita_list.length;i++){
                    if(!ita_list[i].includes(ita)){
                        if(ita_list[0].includes(ita)){
                            if(i > 1){
                                result += ', ';
                            }
                        }
                        else if(i > 0){
                            result += ', ';
                        }
                        result += ita_list[i];
                    }
                }
                if(result == ''){
                    popup.innerHTML = '&emsp;&emsp;&nbsp;&nbsp;"Abflughafen"';
                    document.getElementById('airports').value = '';
                }else {
                    popup.innerHTML = result;
                    document.getElementById('airports').value = result;
                }
            }else {
                //adds the airport at the end
                popup.innerHTML += ', ' + ita;
                document.getElementById('airports').value += ', ' + ita;
            }
        }
    }

    </script>
</body>
</html>